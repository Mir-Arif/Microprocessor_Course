b27 SEGMENT PARA PUBLIC 'CODE'
ASSUME CS:b27
ORG 1000H

START:
    ;TURN ON CONTROL REGISTER
    MOV AL, 080H
    OUT 1FH,AL
    OUT 1EH,AL
    ;LOOP CONTROL VARIABLE
    MOV BL,0

    ;SEGMENT OFF
    MOV AL,0FFH
    OUT 19H,AL
    
    ;SHOWING OUTPUTS

    ;LED green
    MOV AL,002H
    OUT 1BH,AL

    ;DOT MATRIX
    MOV SI,OFFSET DATA      
L1: MOV AL,BYTE PTR CS:[SI] 
    ;PORT A
    OUT 18H,AL
    INC SI
    MOV AL,BYTE PTR CS:[SI] 
    ;PORT B
    OUT 1AH,AL
    INC SI
    MOV AL,BYTE PTR CS:[SI] 
    ;PORT C
    OUT 1CH,AL
    ;DELAY
    MOV CX,0EFFFH
    L2:LOOP L2

    ;INCREMENT
    INC SI
    INC BL

    ;CHECKING FOR LED
    CMP BL,002H
    JE LEDO
    CMP BL,005H
    JE LEDR
    CMP BL,007H
    JE LEDG

    ;CHECKING FOR LOOP TERMINATION
    CMP BL,00CH
    JE LED
DELAY:
    MOV CX,0001H
    L8:LOOP L8
    MOV CX,0001H
    L6:LOOP L6
    JMP L1

;SSD CHANGES
LEDG:
    MOV AL,002H
    OUT 1BH,AL
    JMP DELAY
LEDO:
    MOV AL,00CH
    OUT 1BH,AL
    JMP DELAY
LEDR:
    MOV AL,001H
    OUT 1BH,AL
    JMP DELAY
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
LED:
    MOV BL,0
	MOV SI,OFFSET DATA   
L73: MOV AL,BYTE PTR CS:[SI] 
    ;PORT A
    OUT 18H,AL
    INC SI
    MOV AL,BYTE PTR CS:[SI] 
    ;PORT B
    OUT 1AH,AL
    INC SI
    MOV AL,BYTE PTR CS:[SI] 
    ;PORT C
    OUT 1CH,AL
    ;DELAY
   ; MOV CX,0EFFFH
   ; L2:LOOP L2

    ;INCREMENT
    INC SI
    INC BL

    ;CHECKING FOR LED
    CMP BL,002H
    JE LEDO1
    CMP BL,005H
    JE LEDR1
    CMP BL,007H
    JE LEDG1

    ;CHECKING FOR LOOP TERMINATION
    CMP BL,00CH
    JE LED
DELAY1:
  ;  MOV CX,0001H
    ;L8:LOOP L8
   ; MOV CX,0001H
   ; L6:LOOP L6
    JMP L73

;SSD CHANGES
LEDG1:
   ; MOV AL,002H
    ;OUT 1BH,AL
    JMP DELAY1
LEDO1:
   ; MOV AL,00CH
   ; OUT 1BH,AL
    JMP DELAY1
LEDR1:
   ; MOV AL,001H
   ; OUT 1BH,AL
    JMP DELAY1
;;;;;;;;;;;;;;;;;;;;;;;;;;;    
DATA:
;r5,c0(green) 
DB 0DFH
DB 0FFH
DB 001H

;r6,c1(green) 
DB 0BFH
DB 0FFH
DB 002H

;R7(ORANGE)
;C2
DB 07FH
DB 07FH
DB 004H

;C3
DB 07FH
DB 07FH
DB 008H

;C4
DB 07FH
DB 07FH
DB 010H

;R6,C5(RED)
DB 0FFH
DB 0BFH
DB 020H

;R5,C6(RED)
DB 0FFH
DB 0DFH
DB 040H

;R5(GREEN)
;C5
DB 0DFH
DB 0FFH
DB 020H

;C4
DB 0DFH
DB 0FFH
DB 010H

;C3
DB 0DFH
DB 0FFH
DB 008H
;C2
DB 0DFH
DB 0FFH
DB 004H
;C1
DB 0DFH
DB 0FFH
DB 002H
	
    
PL:
	b27 ENDS
	END START